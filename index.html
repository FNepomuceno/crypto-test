<!doctype html>
<html>
<head>
<meta charset="UTF-8">
</head>
<body>
<script src="key.js"></script>
<script src="store.js"></script>
<script src="encrypt.js"></script>
<script src="sign.js"></script>
<script>
(async function () {
  let {
    privateKey: aPrivate,
    publicKey: aPublic
  } = await generateEcdsaKeypair()

  let data = window.crypto.getRandomValues(new Uint8Array(256))
  let signature = await signEcdsa(aPrivate, data)
  let result = await verifyEcdsa(aPublic, data, signature)

  console.log(bufferToHex(data))
  console.log(bufferToHex(signature))
  console.log('Signature valid?', result)

  function bufferToHex(buffer) {
    let data = Array.from(new Uint8Array(buffer))
    return data.map(x => x.toString(16).padStart(2, '0')).join('')
  }
})()
</script>
</body>
</html>
